---
import BgImages from "./components/BgImages.astro";
import Description from "./components/Description.astro";

interface Props {
  id?: string;
}

const { id } = Astro.props;
---

<section id={id} class="community" tabindex="0">
  <div class="out-images">
    <BgImages className="images" />
  </div>
  <div class="content">
    <div class="sect-name">
      <span class="sect-name-text"> Społeczność </span>
    </div>
    <Description className="desc" />
  </div>
</section>

<style>
  .community {
    position: relative;
    height: min(80vh, 800px);
    min-height: 600px;
    background: #191919;
    overflow: hidden;
    scroll-snap-align: end;
    box-shadow: 0 0 1vw 0 #000;
    max-height: 50vw;
  }
  .community::before {
    background: url("./woven.jpg");
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    content: "";
    transition: filter 0.3s ease-in-out;
  }
  .out-images {
    max-width: 100vw;
    max-height: 100%;
    height: 100%;
    position: relative;
  }
  .community :global(.images) {
    position: absolute;
    top: 0;
    left: 0;
    filter: blur(0);
    transform: translateX(calc(min(65vw, 1300px) - 960px))
      translateY(calc(min(15vh, 150px) - 360px)) rotate(-8deg);
    transition: filter 0.3s ease-in-out;
  }
  .community:focus-visible :global(.images),
  .community:focus-visible::before,
  .community:hover :global(.images),
  .community:hover::before {
    filter: blur(5px);
  }
  .sect-name {
    background-color: #0005;
    backdrop-filter: blur(5px);
    transition:
      background-color 0.3s ease-in-out,
      backdrop-filter 0.3s ease-in-out;
  }
  .community:focus-visible .sect-name,
  .community:hover .sect-name {
    background-color: transparent;
    backdrop-filter: blur(0);
  }
  .content {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: transparent;
    display: flex;
    transition: background-color 0.3s ease-in-out;
  }
  .community:focus-visible .content,
  .content:hover {
    background-color: #0005;
  }
  .community :global(.desc) {
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }
  .community:focus-visible :global(.desc),
  .community .content:hover :global(.desc) {
    opacity: 1;
  }

  @media (max-width: 500px) {
    .community {
      max-height: unset;
      height: 75vh;
    }
    .out-images {
      height: inherit;
      top: 18vw;
      height: 82%;
    }
    .community :global(.images) {
      filter: blur(0);
      transform: none;
      transition: none;
    }
    .community:hover .images,
    .community:hover::before {
      filter: blur(0);
    }
    .content {
      flex-direction: column;
    }
    .sect-name {
      width: 100%;
      height: auto;
      padding: 2%;
      transition: none;
    }
    .community:hover .sect-name {
      background-color: #0005;
      backdrop-filter: blur(5px);
    }
    .sect-name-text::before {
      width: 10vw;
      height: 10vw;
      margin: unset;
      margin-right: 3vw;
    }
    .sect-name-text {
      display: flex;
      font-size: 10vw;
      align-items: center;
    }
    .content {
      transition: none;
    }
    .content:hover {
      background-color: unset;
    }
    .community :global(.desc) {
      opacity: 1;
      transition: none;
    }
  }
</style>
